package util;

import java.text.Normalizer;
import java.util.HashMap;

public class TextUtil {
	
	private static HashMap<String, String> accents = new HashMap<String, String>();
	
	public static HashMap<String, String> getAccents(){
		if(accents.isEmpty()){
			accents.put("é", "[é|E|"+"é".toUpperCase()+"]");
			accents.put("è", "[è|E|"+"è".toUpperCase()+"]");
			accents.put("ê", "[ê|E|"+"ê".toUpperCase()+"]");
			accents.put("à", "[à|A|"+"à".toUpperCase()+"]");
			accents.put("â", "[â|A|"+"â".toUpperCase()+"]");
			
			accents.put("é".toUpperCase(), "[é|E|"+"é".toUpperCase()+"]");
			accents.put("è".toUpperCase(), "[è|E|"+"è".toUpperCase()+"]");
			accents.put("ê".toUpperCase(), "[ê|E|"+"ê".toUpperCase()+"]");
			accents.put("à".toUpperCase(), "[à|A|"+"à".toUpperCase()+"]");
			accents.put("â".toUpperCase(), "[â|A|"+"â".toUpperCase()+"]");
			
			accents.put("ç", "[ç|"+"ç".toUpperCase()+"]");
			accents.put("ç".toUpperCase(), "[ç|"+"ç".toUpperCase()+"]");
		}
		
		return accents;
	}
	public static String capitalize(String term){
		String [] tokens = term.split(" ");
		String newTerm = "";
		for(String token : tokens){
			newTerm = newTerm + " " + token.substring(0, 1).toUpperCase() + token.substring(1);
		}
		
		return newTerm.trim();
		
	}
	
	public static boolean isCapitalize(String term){
		String [] tokens = term.split(" ");
		
		for(String token : tokens){
			if(!Character.isUpperCase(token.charAt(0)))
				return false;
		}
		return true;
	}
	
	public static String removeDoubleSpace(String text){
		while(text.contains("  ")){
			text = text.replaceAll("  ", " ");
		}
		
		return text.trim();
	}
	
	public static String stripAccent(String txt){
		txt = Normalizer.normalize(txt, Normalizer.Form.NFD);
		txt = txt.replaceAll("[\\p{InCombiningDiacriticalMarks}]", "");
		
		return txt;
	}
	
	private static String changeAccentToRegex(String term){
		
		String [] tokens = term.split(" ");
		String newTerm = "";
		for(String token : tokens){
			String firstChar = token.substring(0, 1);
			String regex = getAccents().get(firstChar);
			if(regex == null){
				regex = firstChar;
			}
			newTerm = newTerm + " " + regex + token.substring(1);
		}
		
		return newTerm.trim();
		
	}
	public static void main(String [] args){
		String term = "évêque de çesar";
			System.out.println(changeAccentToRegex(term));
		
	}

}
